package main

import (
	"fmt"
	"log"
	"net/url"
)

func main() {
	str := `app_id=L.H&stream_url=rtn%3a%2f%2fqgstestrtnstre22222222222222amurl.cloudhub.top%2flive%2fqgstest%3fkey%3dpubxxx&client_sdp=v%3d0%d%ao%3d-%201363484382154165498%202%20IN%20IP4%200.0.0.0%d%as%3d-%d%at%3d0%200%d%aa%3dgroup%3aBUNDLE%200%201%d%aa%3dmsid-semantic%3a%20WMS%20Video_stream_id%20audio_stream_id%d%am%3dvideo%209%20RTP%2fAVPF%2096%2097%2098%2099%20100%20101%20127%20122%20125%20121%20124%20107%20108%20109%20123%d%ab%3dAS%3a256%ac%3dIN%20IP4%200.0.0.0%d%aa%3drtcp%3a9%20IN%20IP4%200.0.0.0%d%aa%3dice-ufrag%3and4c%d%aa%3dice-pwd%3adwoYOonUL0D8a%2fH3zj%2fva3Eo%d%aa%3dice-options%3atrickle%d%aa%3dmid%3a0%d%aa%3dextmap%3a14%20urn%3aietf%3aparams%3artp-hdrext%3atoffset%d%aa%3dextmap%3a2%20http%3a%2f%2fwww.webrtc.org%2fexperiments%2frtp-hdrext%2fabs-send-time%d%aa%3dextmap%3a13%20urn%3a3gpp%3avideo-orientation%d%aa%3dextmap%3a3%20http%3a%2f%2fwww.ietf.org%2fid%2fdraft-holmer-rmcat-transport-wide-cc-extensions-01%d%aa%3dextmap%3a12%20http%3a%2f%2fwww.webrtc.org%2fexperiments%2frtp-hdrext%2fplayout-delay%d%aa%3dextmap%3a11%20http%3a%2f%2fwww.webrtc.org%2fexperiments%2frtp-hdrext%2fvideo-content-type%d%aa%3dextmap%3a7%20http%3a%2f%2fwww.webrtc.org%2fexperiments%2frtp-hdrext%2fvideo-timing%d%aa%3dextmap%3a8%20http%3a%2f%2ftools.ietf.org%2fhtml%2fdraft-ietf-avtext-framemarking-07%d%aa%3dextmap%3a9%20http%3a%2f%2fwww.webrtc.org%2fexperiments%2frtp-hdrext%2fcolor-space%d%aa%3dextmap%3a4%20urn%3aietf%3aparams%3artp-hdrext%3asdes%3amid%d%aa%3dextmap%3a5%20urn%3aietf%3aparams%3artp-hdrext%3asdes%3artp-stream-id%d%aa%3dextmap%3a6%20urn%3aietf%3aparams%3artp-hdrext%3asdes%3arepaired-rtp-stream-id%d%aa%3dsendrecv%d%aa%3dmsid%3aVideo_stream_id%20video_label%d%aa%3drtcp-mux%d%aa%3drtcp-rsize%d%aa%3drtpmap%3a96%20VP8%2f90000%d%aa%3drtcp-fb%3a96%20goog-remb%d%aa%3drtcp-fb%3a96%20transport-cc%d%aa%3drtcp-fb%3a96%20ccm%20fir%d%aa%3drtcp-fb%3a96%20nack%d%aa%3drtcp-fb%3a96%20nack%20pli%d%aa%3drtpmap%3a97%20rtx%2f90000%d%aa%3dfmtp%3a97%20apt%3d96%d%aa%3drtpmap%3a98%20H264%2f90000%d%aa%3drtcp-fb%3a98%20goog-remb%d%aa%3drtcp-fb%3a98%20transport-cc%d%aa%3drtcp-fb%3a98%20ccm%20fir%d%aa%3drtcp-fb%3a98%20nack%d%aa%3drtcp-fb%3a98%20nack%20pli%d%aa%3dfmtp%3a98%20level-asymmetry-allowed%3d1%3bpacketization-mode%3d1%3bprofile-level-id%3d42001f%d%aa%3drtpmap%3a99%20rtx%2f90000%d%aa%3dfmtp%3a99%20apt%3d98%d%aa%3drtpmap%3a100%20H264%2f90000%d%aa%3drtcp-fb%3a100%20goog-remb%d%aa%3drtcp-fb%3a100%20transport-cc%d%aa%3drtcp-fb%3a100%20ccm%20fir%d%aa%3drtcp-fb%3a100%20nack%d%aa%3drtcp-fb%3a100%20nack%20pli%d%aa%3dfmtp%3a100%20level-asymmetry-allowed%3d1%3bpacketization-mode%3d0%3bprofile-level-id%3d42001f%d%aa%3drtpmap%3a101%20rtx%2f90000%d%aa%3dfmtp%3a101%20apt%3d100%d%aa%3drtpmap%3a127%20H264%2f90000%d%aa%3drtcp-fb%3a127%20goog-remb%d%aa%3drtcp-fb%3a127%20transport-cc%d%aa%3drtcp-fb%3a127%20ccm%20fir%d%aa%3drtcp-fb%3a127%20nack%d%aa%3drtcp-fb%3a127%20nack%20pli%d%aa%3dfmtp%3a127%20level-asymmetry-allowed%3d1%3bpacketization-mode%3d1%3bprofile-level-id%3d42e01f%d%aa%3drtpmap%3a122%20rtx%2f90000%d%aa%3dfmtp%3a122%20apt%3d127%d%aa%3drtpmap%3a125%20H264%2f90000%d%aa%3drtcp-fb%3a125%20goog-remb%d%aa%3drtcp-fb%3a125%20transport-cc%d%aa%3drtcp-fb%3a125%20ccm%20fir%d%aa%3drtcp-fb%3a125%20nack%d%aa%3drtcp-fb%3a125%20nack%20pli%d%aa%3dfmtp%3a125%20level-asymmetry-allowed%3d1%3bpacketization-mode%3d0%3bprofile-level-id%3d42e01f%d%aa%3drtpmap%3a121%20rtx%2f90000%d%aa%3dfmtp%3a121%20apt%3d125%d%aa%3drtpmap%3a124%20AV1X%2f90000%d%aa%3drtcp-fb%3a124%20goog-remb%d%aa%3drtcp-fb%3a124%20transport-cc%d%aa%3drtcp-fb%3a124%20ccm%20fir%d%aa%3drtcp-fb%3a124%20nack%d%aa%3drtcp-fb%3a124%20nack%20pli%d%aa%3drtpmap%3a107%20rtx%2f90000%d%aa%3dfmtp%3a107%20apt%3d124%d%aa%3drtpmap%3a108%20red%2f90000%d%aa%3drtpmap%3a109%20rtx%2f90000%d%aa%3dfmtp%3a109%20apt%3d108%d%aa%3drtpmap%3a123%20ulpfec%2f90000%d%aa%3dssrc-group%3aFID%20723258999%203853190453%d%aa%3dssrc%3a723258999%20cname%3atlsq6IDBT%2bCB4FMr%d%aa%3dssrc%3a723258999%20msid%3aVideo_stream_id%20video_label%d%aa%3dssrc%3a723258999%20mslabel%3aVideo_stream_id%d%aa%3dssrc%3a723258999%20label%3avideo_label%d%aa%3dssrc%3a3853190453%20cname%3atlsq6IDBT%2bCB4FMr%d%aa%3dssrc%3a3853190453%20msid%3aVideo_stream_id%20video_label%d%aa%3dssrc%3a3853190453%20mslabel%3aVideo_stream_id%d%aa%3dssrc%3a3853190453%20label%3avideo_label%d%am%3daudio%209%20RTP%2fAVPF%20111%20103%20104%209%20102%200%208%20106%20105%2013%20110%20112%20113%20126%d%ac%3dIN%20IP4%200.0.0.0%d%aa%3drtcp%3a9%20IN%20IP4%200.0.0.0%d%aa%3dice-ufrag%3and4c%d%aa%3dice-pwd%3adwoYOonUL0D8a%2fH3zj%2fva3Eo%d%aa%3dice-options%3atrickle%d%aa%3dmid%3a1%d%aa%3dextmap%3a1%20urn%3aietf%3aparams%3artp-hdrext%3assrc-audio-level%d%aa%3dextmap%3a2%20http%3a%2f%2fwww.webrtc.org%2fexperiments%2frtp-hdrext%2fabs-send-time%d%aa%3dextmap%3a3%20http%3a%2f%2fwww.ietf.org%2fid%2fdraft-holmer-rmcat-transport-wide-cc-extensions-01%d%aa%3dextmap%3a4%20urn%3aietf%3aparams%3artp-hdrext%3asdes%3amid%d%aa%3dextmap%3a5%20urn%3aietf%3aparams%3artp-hdrext%3asdes%3artp-stream-id%d%aa%3dextmap%3a6%20urn%3aietf%3aparams%3artp-hdrext%3asdes%3arepaired-rtp-stream-id%d%aa%3dsendrecv%d%aa%3dmsid%3aaudio_stream_id%20audio_label%d%aa%3drtcp-mux%d%aa%3drtpmap%3a111%20opus%2f48000%2f2%d%aa%3drtcp-fb%3a111%20transport-cc%d%aa%3dfmtp%3a111%20minptime%3d10%3buseinbandfec%3d1%d%aa%3drtpmap%3a103%20ISAC%2f16000%d%aa%3drtpmap%3a104%20ISAC%2f32000%d%aa%3drtpmap%3a9%20G722%2f8000%d%aa%3drtpmap%3a102%20ILBC%2f8000%d%aa%3drtpmap%3a0%20PCMU%2f8000%d%aa%3drtpmap%3a8%20PCMA%2f8000%d%aa%3drtpmap%3a106%20CN%2f32000%d%aa%3drtpmap%3a105%20CN%2f16000%d%aa%3drtpmap%3a13%20CN%2f8000%d%aa%3drtpmap%3a110%20telephone-event%2f48000%d%aa%3drtpmap%3a112%20telephone-event%2f32000%d%aa%3drtpmap%3a113%20telephone-event%2f16000%d%aa%3drtpmap%3a126%20telephone-event%2f8000%d%aa%3dssrc%3a4059956619%20cname%3atlsq6IDBT%2bCB4FMr%d%aa%3dssrc%3a4059956619%20msid%3aaudio_stream_id%20audio_label%d%aa%3dssrc%3a4059956619%20mslabel%3aaudio_stream_id%d%aa%3dssrc%3a4059956619%20label%3aaudio_label%d%a&nonce=&sign=&client_id=&m_client_info=&self_ip=192.168.0.123`
	str = `app_id=L.H&stream_url=rtn%3a%2f%2fqgstestrtnstre22222222222222amurl.cloudhub.top%2flive%2fqgstest%3fkey%3dpubxxx&client_sdp=v%3d0%3d&nonce=&sign=&client_id=&m_client_info=&self_ip=192.168.0.123`

	//str = "v%3d0%d%ao%3d-%201363484382154165498%202%20IN%20IP4%200.0.0.0%d%as%3d-%d%at%3d0%200%d%aa%3dgroup%3aBUNDLE%200%201%d%aa%3dmsid-semantic%3a%20WMS%20Video_stream_id%20"
	params, err := url.QueryUnescape(str)
	if err != nil {
		log.Fatal(err)
		return
	}
	fmt.Println("Query Params: ", params)
	for key, value := range params {
		fmt.Printf("  %v = %v\n", key, value)
	}

	test()
}

func test() {
	var urlStr = "payload 中国"
	escapeUrl := url.QueryEscape(urlStr)
	fmt.Println("编码:", escapeUrl)
	enEscapeUrl, _ := url.QueryUnescape(escapeUrl)
	fmt.Println("解码:", enEscapeUrl)
}
